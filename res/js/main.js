function virgul_sonrasi_iki_basamak(a,b){var c,d,e;return a.toString().indexOf(".")>-1?(c=a.toString().substr(0,a.toString().indexOf(".")),d=a.toString().substr(a.toString().indexOf(".")+1),d.length>2?d=d.substr(0,2):1==d.length&&(d+="0"),e=b?parseFloat(c+"."+d):c+","+d):e=b?parseFloat(a):a+",00",e}var Base={mobile:!1,language:"TR",main_url:"http://ahsaphobby.net/bus/",AJAX_URL:"",mode_check:function(){window.innerWidth<=767&&(this.mobile=!0)},perms:[]};AHReady(function(){Base.AJAX_URL=Base.main_url+"ajax/";var a=find_elem(document,".qtybtn");a.length>0&&add_event(a,"click",function(){var a=find_elem(this.parentNode,"input"),b=parseInt(a.value);hasClass(a,"redborder")&&FormValidation.hide_error(a),hasClass(this,"arttir")?a.value=b+1:b>0&&(a.value=b-1)})});var FormNotf=function(a){this.states=["error","success","loading"],this.last_state="",this.classname=".main-form-notf",this.elem=find_elem(a.parentNode,this.classname),this.init=function(a,b){if(removeClass(this.elem,"active"),""==this.last_state)for(var c=0;c<this.states.length;c++)removeClass(this.elem,this.states[c]);else removeClass(this.elem,this.states[this.last_state]);set_html(this.elem,b),addClass(this.elem,this.states[a]),addClass(this.elem,"active"),this.last_state=a}},DataTable=function(a){this.data=a.data,this.record_count=this.data.length,this.active_data=[],this.rrp=30,this.page=1,this.page_count=Math.ceil(this.record_count/this.rrp),this.order="DESC",this.filtered=!1,this.filter_data={},this.data_filtered=[],this.active_data=[],this.init=function(){var b,c="",d=0,e="";for(this.filtered?(this.record_count=this.data_filtered.length,this.page_count=Math.ceil(this.record_count/this.rrp),this.active_data=this.data_filtered):(this.record_count=this.data.length,this.page_count=Math.ceil(this.record_count/this.rrp),this.active_data=this.data),b=1==this.page?0:this.page*this.rrp-this.rrp;b<this.active_data.length;b++){var f=this.active_data[b];if(d<this.rrp){for(var g=[],h="",i="",j="",k=0;k<a.header_keys.length;k++)g.push(f[a.header_keys[k]]);h=g.join(" - ");var l=1;for(var m in a.data_headers)void 0!=f[a.data_headers[m]]&&(i+="<li><span>"+m+"</span>"+f[a.data_headers[m]]+"</li>","Miktar"==m&&(l=parseInt(f[a.data_headers[m]])));if(void 0!=a.inner_table_contents){e='<table class="inner-table"><thead><tr>';var n,o=0;for(var p in a.inner_table_contents)if(p==f[a.inner_table_parent_key]){o=p;break}if(0!=o){for(var q in a.inner_table_thead)e+="<td>"+a.inner_table_thead[q]+"</td>";e+="</tr></thead><tbody>";for(var p in a.inner_table_contents[o]){n=a.inner_table_contents[o][p],e+="<tr>";for(var r in n)e+="<td>"+n[r]+"</td>";if(void 0!=a.inner_table_navs)for(var s=0;s<a.inner_table_navs.length;s++)e+='<td item-id="'+n[a.inner_table_navs_item_key]+'"><a href="'+a.inner_table_navs[s].href+n[a.inner_table_navs_item_key]+'"</a>'+a.inner_table_navs[s].title+"</td>";e+="</tr>"}e+="</tbody></table>"}else e="Veri Yok"}for(var t in a.nav_headers)if(in_array(a.nav_headers[t].pl,Base.PERMS)){var u="",v="",w="";"SİL"==t&&(u="jx-delete",v='item-id="'+f.id+'"'),"OTOBÜSE EKLE"==t&&0==l&&(w="onclick=\"alert('Bu malzeme stokta yok.'); return false;\""),j+="<li><a "+w+' href="'+a.nav_headers[t].href+f.id+'" '+v+' class="'+a.nav_headers[t].class+" "+u+'">'+t+"</a></li>"}c+='<li><div class="otobus-header  clearfix"><div class="otobus-summary"><i class="'+a.icon_class+'"></i><span>'+h+'</span></div><i class="ico down-arrow otobus-arrow"></i></div><div class="otobus-content">'+e+"<ul>"+i+'</ul><div class="content-nav clearfix"><ul>'+j+"</ul></div></div></li>",d++}}set_html(a.container,c),this.init_pagination(),fade_in(a.container)},this.init_pagination=function(){for(var b=[1,2,5,30,50,100],c='<div class="pagination-col"><span>Kayıt Sayısı</span><select name="dt_rrp" id="dt_rrp" >',d=0;d<b.length;d++){var e="";b[d]==this.rrp&&(e=" selected"),c+="<option "+e+">"+b[d]+"</option>"}c+='</select></div><div class="pagination-col mobile-iblock"><button  class="pagination-btn first" ></button><button  class="pagination-btn prev" ></button></div>',c+='<div class="pagination-col hide-mobile"><span>Sayfa</span><select name="dt_page" id="dt_page" >';for(var d=1;d<this.page_count+1;d++){var e="";d==this.page&&(e=" selected"),c+="<option "+e+">"+d+"</option>"}var f=this.rrp*this.page;this.rrp*this.page>this.record_count&&(f=this.record_count),c+='</select></div><div class="pagination-col hide-mobile"><span>( '+(this.rrp*this.page-this.rrp+1)+" - "+f+" / "+this.record_count+' )</span></div><div class="pagination-col mobile-iblock"><button class="pagination-btn next" ></button><button class="pagination-btn last"></button></div>',set_html(a.pagin_container,c)},this.change_rrp=function(a){this.page=1,this.rrp=a,this.page_count=Math.ceil(this.record_count/this.rrp),this.init()},this.change_page=function(a){1!=this.page_count&&(0==a?this.page=this.page_count:a>this.page_count?this.page=1:this.page=a,this.init())},this.change_order=function(){"ASC"==this.order?this.order="DESC":this.order="ASC"},this.init_events=function(){function c(){for(var c={},d=0;d<a.filter_inputs.length;d++)0!=$AH(a.filter_inputs[d]).value&&(c[a.filter_inputs[d].substr(3)]=$AH(a.filter_inputs[d]).value);Object.size(c)>0?b.filter(c):b.reset()}var b=this;add_event_on(a.pagin_container,".next","click",function(a,c){b.change_page(b.page+1)}),add_event_on(a.pagin_container,".prev","click",function(a,c){b.change_page(b.page-1)}),add_event_on(a.pagin_container,".last","click",function(a,c){b.change_page(b.page_count)}),add_event_on(a.pagin_container,".first","click",function(a,c){b.change_page(1)}),add_event_on(a.pagin_container,"#dt_rrp","change",function(a,c){b.change_rrp(a.value)}),add_event_on(a.pagin_container,"#dt_page","change",function(a,c){b.change_page(a.value)}),add_event_on(a.container,".otobus-header","click",function(a,b){toggle_class(find_elem(a.parentNode,".otobus-content"),"active"),toggle_class(find_elem(a,".otobus-arrow"),"up-arrow"),fade_in(find_elem(a.parentNode,".otobus-content")),window.scrollTo(0,get_coords(a).top)}),add_event(find_elem(a.pagin_container.parentNode,".pagin-toggle"),"click",function(){toggle_class(find_elem(this.parentNode,".pagination-center"),"activeib")}),void 0!=a.filter_container&&add_event(find_elem(a.filter_container.parentNode,".pagin-toggle"),"click",function(){toggle_class(find_elem(this.parentNode,".pagination-center"),"activeib")}),void 0!=a.jx_delete&&add_event_on(a.container,".jx-delete","click",function(b,c){a.jx_delete(b),event_prevent_default(c)}),void 0!=$AH("filter_form")&&(add_event($AH("filter_form"),"keyup",function(a){event_prevent_default(a),27==a.keyCode?(b.reset(),$AH("filter_form").reset()):13==a.keyCode&&c()}),add_event($AH("filter_form"),"submit",function(a){event_prevent_default(a)})),void 0!=a.filter_inputs&&(add_event(find_elem(a.filter_container,"#filter_uygula"),"click",function(){c()}),add_event(find_elem(a.filter_container,"#filter_reset"),"click",function(){b.reset(),$AH("filter_form").reset()}))},this.filter=function(a){this.filter_data=a,this.filtered=!0,this.page=1,this.record_count=0,this.page_count=0,this.data_filtered=[];for(var b=0;b<this.data.length;b++){var c=this.data[b],d=!1;for(var e in this.filter_data)c[e]==this.filter_data[e]||c[e]==this.filter_data[e].toUpperCase()||(d=!0);d||(this.record_count++,this.data_filtered.push(this.data[b]))}this.init()},this.reset=function(){this.filter_data=[],this.filtered=!1,this.page=1,this.data_filtered=[],this.init()},this.find_item_index=function(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]==c)return d},this.find_item=function(a,b){var c=this.find_item_index(a,b);return void 0!=this.active_data[c]&&this.active_data[c]},this.update_item=function(a,b,c){this.filtered&&overwrite(this.data[this.find_item_index(this.data,a,b)],c),overwrite(this.active_data[this.find_item_index(this.active_data,a,b)],c)},this.delete_item=function(a,b){this.filtered&&this.data.splice(this.find_item_index(this.data,a,b),1),this.active_data.splice(this.find_item_index(this.active_data,a,b),1)}};